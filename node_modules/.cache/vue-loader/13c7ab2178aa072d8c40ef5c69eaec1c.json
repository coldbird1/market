{"remainingRequest":"E:\\vue\\market\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue\\market\\src\\views\\detail\\Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue\\market\\src\\views\\detail\\Detail.vue","mtime":1629515589618},{"path":"E:\\vue\\market\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue\\market\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgRGV0YWlsTmF2IGZyb20gIi4vY2hpbGRDb21wcy9EZXRhaWxOYXYudnVlIjsNCmltcG9ydCBTY3JvbGwgZnJvbSAiY29tcG9uZW50cy9jb21tb24vc2Nyb2xsL1Njcm9sbCI7DQppbXBvcnQgRGV0YWlsU3dpcGVyIGZyb20gIi4vY2hpbGRDb21wcy9EZXRhaWxTd2lwZXIudnVlIjsNCmltcG9ydCBEZXRhaWxCYXNlSW5mbyBmcm9tICIuL2NoaWxkQ29tcHMvRGV0YWlsQmFzZUluZm8udnVlIjsNCmltcG9ydCBEZXRhaWxTaG9wSW5mbyBmcm9tICIuL2NoaWxkQ29tcHMvRGV0YWlsU2hvcEluZm8iOw0KaW1wb3J0IERldGFpbEdvb2RzSW5mbyBmcm9tICIuL2NoaWxkQ29tcHMvRGV0YWlsR29vZHNJbmZvIjsNCmltcG9ydCBEZXRhaWxQYXJhbUluZm8gZnJvbSAiLi9jaGlsZENvbXBzL0RldGFpbFBhcmFtSW5mbyI7DQppbXBvcnQgRGV0YWlsQ29tbWVudEluZm8gZnJvbSAiLi9jaGlsZENvbXBzL0RldGFpbENvbW1lbnRJbmZvIjsNCmltcG9ydCBEZXRhaWxSZWNvbW1lbmRJbmZvIGZyb20gIi4vY2hpbGRDb21wcy9EZXRhaWxSZWNvbW1lbmRJbmZvIjsNCmltcG9ydCBEZXRhaWxCb3R0b21CYXIgZnJvbSAiLi9jaGlsZENvbXBzL0RldGFpbEJvdHRvbUJhciI7DQppbXBvcnQgew0KICBnZXREZXRhaWwsDQogIEdvb2RzLA0KICBTaG9wLA0KICBHb29kc1BhcmFtLA0KICBnZXRSZWNvbW1lbmQsDQp9IGZyb20gIm5ldHdvcmsvZGV0YWlsIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgRGV0YWlsTmF2LA0KICAgIFNjcm9sbCwNCiAgICBEZXRhaWxTd2lwZXIsDQogICAgRGV0YWlsQmFzZUluZm8sDQogICAgRGV0YWlsU2hvcEluZm8sDQogICAgRGV0YWlsR29vZHNJbmZvLA0KICAgIERldGFpbFBhcmFtSW5mbywNCiAgICBEZXRhaWxDb21tZW50SW5mbywNCiAgICBEZXRhaWxSZWNvbW1lbmRJbmZvLA0KICAgIERldGFpbEJvdHRvbUJhciwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdGl0bGVzOiBbIuWVhuWTgSIsICLlj4LmlbAiLCAi6K+E6K66IiwgIuaOqOiNkCJdLA0KICAgICAgdG9wSW1hZ2VzOiBbXSwNCiAgICAgIEdvb2RzOiB7fSwNCiAgICAgIHNob3A6IHt9LA0KICAgICAgZGV0YWlsSW5mbzoge30sDQogICAgICBwYXJhbUluZm86IHt9LA0KICAgICAgY29tbWVudEluZm86IHt9LA0KICAgICAgcmVjb21tZW5kTGlzdDogW10sDQogICAgICBpdGVtSW1nTGlzdGVuZXI6IG51bGwsDQogICAgICB0aGVtZVRvcFlzOiBbXSwNCiAgICAgIGNvbnRlbnRZOiBudWxsLA0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7fSwNCiAgd2F0Y2g6IHt9LA0KICBtZXRob2RzOiB7DQogICAgaW1hZ2VMb2FkKCkgew0KICAgICAgdGhpcy4kcmVmcy5zY3JvbGwucmVmcmVzaCgpOw0KICAgICAgdGhpcy50aGVtZVRvcFlzID0gW107DQogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCh0aGlzLiRyZWZzLmJhc2UuJGVsLm9mZnNldFRvcCk7DQogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCh0aGlzLiRyZWZzLnBhcmFtLiRlbC5vZmZzZXRUb3ApOw0KICAgICAgdGhpcy50aGVtZVRvcFlzLnB1c2godGhpcy4kcmVmcy5jb21tZW50LiRlbC5vZmZzZXRUb3ApOw0KICAgICAgdGhpcy50aGVtZVRvcFlzLnB1c2godGhpcy4kcmVmcy5yZWNvbW1lbmQuJGVsLm9mZnNldFRvcCk7DQogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCh0aGlzLiRyZWZzLnJlY29tbWVuZC4kZWwub2Zmc2V0VG9wICogMTApOw0KICAgIH0sDQoNCiAgICBkZXRhaWxTY3JvbGwocG9zaXRpb24pIHsNCiAgICAgIGxldCBwb3NpdGlvblkgPSAtcG9zaXRpb24ueTsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50aGVtZVRvcFlzLmxlbmd0aCAtIDE7IGkrKykgew0KICAgICAgICBpZiAoDQogICAgICAgICAgcG9zaXRpb25ZID49IHRoaXMudGhlbWVUb3BZc1tpXSAtIDMwICYmDQogICAgICAgICAgcG9zaXRpb25ZIDwgdGhpcy50aGVtZVRvcFlzW2kgKyAxXSAtIDMwDQogICAgICAgICkgew0KICAgICAgICAgIHRoaXMuJHJlZnMubmF2LmN1cnJlbnRJbmRleCA9IGk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KDQogICAgdGhlbWVDbGljayhpbmRleCkgew0KICAgICAgdGhpcy4kcmVmcy5zY3JvbGwuc2Nyb2xsVG8oMCwgLXRoaXMudGhlbWVUb3BZc1tpbmRleF0sIDE1MCk7DQogICAgfSwNCg0KICAgIGNhcnRDbGljaygpIHsNCiAgICAgIGNvbnN0IG9iaiA9IHt9Ow0KICAgICAgb2JqLmltYWdlID0gdGhpcy50b3BJbWFnZXNbMF07DQogICAgICBvYmouaWlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlpZDsNCiAgICAgIG9iai50aXRsZSA9IHRoaXMuR29vZHMudGl0bGU7DQogICAgICBvYmouZGVzYyA9IHRoaXMuR29vZHMuZGVzYzsNCiAgICAgIG9iai5uZXdQcmljZSA9IHRoaXMuR29vZHMubmV3UHJpY2U7DQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiYWRkQ2FydCIsIG9iaikudGhlbigocmVzKSA9PiB7DQogICAgICAgIHRoaXMuJHRvYXN0LnNob3cocmVzLCAzMDApOw0KICAgICAgfSk7DQogICAgfSwNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICBnZXREZXRhaWwodGhpcy4kcm91dGUucGFyYW1zLmlpZCkudGhlbigocmVzKSA9PiB7DQogICAgICB0aGlzLnRvcEltYWdlcyA9IHJlcy5yZXN1bHQuaXRlbUluZm8udG9wSW1hZ2VzOw0KICAgICAgY29uc3QgZGF0YSA9IHJlcy5yZXN1bHQ7DQogICAgICB0aGlzLkdvb2RzID0gbmV3IEdvb2RzKA0KICAgICAgICBkYXRhLml0ZW1JbmZvLA0KICAgICAgICBkYXRhLmNvbHVtbnMsDQogICAgICAgIGRhdGEuc2hvcEluZm8uc2VydmljZXMNCiAgICAgICk7DQoNCiAgICAgIHRoaXMuc2hvcCA9IG5ldyBTaG9wKGRhdGEuc2hvcEluZm8pOw0KICAgICAgdGhpcy5kZXRhaWxJbmZvID0gZGF0YS5kZXRhaWxJbmZvOw0KICAgICAgdGhpcy5wYXJhbUluZm8gPSBuZXcgR29vZHNQYXJhbSgNCiAgICAgICAgZGF0YS5pdGVtUGFyYW1zLmluZm8sDQogICAgICAgIGRhdGEuaXRlbVBhcmFtcy5ydWxlDQogICAgICApOw0KICAgICAgaWYgKGRhdGEucmF0ZS5saXN0KSB7DQogICAgICAgIHRoaXMuY29tbWVudEluZm8gPSBkYXRhLnJhdGUubGlzdFswXTsNCiAgICAgIH0NCiAgICAgIGdldFJlY29tbWVuZCgpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICB0aGlzLnJlY29tbWVuZExpc3QgPSByZXMuZGF0YS5saXN0Ow0KICAgICAgfSk7DQogICAgfSk7DQogIH0sDQogIG1vdW50ZWQoKSB7fSwNCn07DQo="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views/detail","sourcesContent":["<!--  -->\r\n<template>\r\n  <div class=\"detail\">\r\n    <DetailNav :titles=\"titles\" ref=\"nav\" @themeClick=\"themeClick\" />\r\n    <Scroll\r\n      class=\"scrollContent\"\r\n      :listen-scroll=\"true\"\r\n      @scroll=\"detailScroll\"\r\n      :probe-type=\"3\"\r\n      ref=\"scroll\"\r\n    >\r\n      <DetailSwiper :top-images=\"topImages\" class=\"swiperContent\" ref=\"base\" />\r\n      <DetailBaseInfo :goods=\"Goods\" />\r\n      <DetailShopInfo :shop=\"shop\" />\r\n      <DetailGoodsInfo :detail-info=\"detailInfo\" @imageLoad=\"imageLoad\" />\r\n      <DetailParamInfo :param-info=\"paramInfo\" ref=\"param\" />\r\n      <DetailCommentInfo :comment-info=\"commentInfo\" ref=\"comment\" />\r\n      <DetailRecommendInfo :recommend-list=\"recommendList\" ref=\"recommend\" />\r\n    </Scroll>\r\n    <DetailBottomBar @cartClick=\"cartClick\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DetailNav from \"./childComps/DetailNav.vue\";\r\nimport Scroll from \"components/common/scroll/Scroll\";\r\nimport DetailSwiper from \"./childComps/DetailSwiper.vue\";\r\nimport DetailBaseInfo from \"./childComps/DetailBaseInfo.vue\";\r\nimport DetailShopInfo from \"./childComps/DetailShopInfo\";\r\nimport DetailGoodsInfo from \"./childComps/DetailGoodsInfo\";\r\nimport DetailParamInfo from \"./childComps/DetailParamInfo\";\r\nimport DetailCommentInfo from \"./childComps/DetailCommentInfo\";\r\nimport DetailRecommendInfo from \"./childComps/DetailRecommendInfo\";\r\nimport DetailBottomBar from \"./childComps/DetailBottomBar\";\r\nimport {\r\n  getDetail,\r\n  Goods,\r\n  Shop,\r\n  GoodsParam,\r\n  getRecommend,\r\n} from \"network/detail\";\r\n\r\nexport default {\r\n  components: {\r\n    DetailNav,\r\n    Scroll,\r\n    DetailSwiper,\r\n    DetailBaseInfo,\r\n    DetailShopInfo,\r\n    DetailGoodsInfo,\r\n    DetailParamInfo,\r\n    DetailCommentInfo,\r\n    DetailRecommendInfo,\r\n    DetailBottomBar,\r\n  },\r\n  data() {\r\n    return {\r\n      titles: [\"商品\", \"参数\", \"评论\", \"推荐\"],\r\n      topImages: [],\r\n      Goods: {},\r\n      shop: {},\r\n      detailInfo: {},\r\n      paramInfo: {},\r\n      commentInfo: {},\r\n      recommendList: [],\r\n      itemImgListener: null,\r\n      themeTopYs: [],\r\n      contentY: null,\r\n    };\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n  methods: {\r\n    imageLoad() {\r\n      this.$refs.scroll.refresh();\r\n      this.themeTopYs = [];\r\n      this.themeTopYs.push(this.$refs.base.$el.offsetTop);\r\n      this.themeTopYs.push(this.$refs.param.$el.offsetTop);\r\n      this.themeTopYs.push(this.$refs.comment.$el.offsetTop);\r\n      this.themeTopYs.push(this.$refs.recommend.$el.offsetTop);\r\n      this.themeTopYs.push(this.$refs.recommend.$el.offsetTop * 10);\r\n    },\r\n\r\n    detailScroll(position) {\r\n      let positionY = -position.y;\r\n      for (let i = 0; i < this.themeTopYs.length - 1; i++) {\r\n        if (\r\n          positionY >= this.themeTopYs[i] - 30 &&\r\n          positionY < this.themeTopYs[i + 1] - 30\r\n        ) {\r\n          this.$refs.nav.currentIndex = i;\r\n        }\r\n      }\r\n    },\r\n\r\n    themeClick(index) {\r\n      this.$refs.scroll.scrollTo(0, -this.themeTopYs[index], 150);\r\n    },\r\n\r\n    cartClick() {\r\n      const obj = {};\r\n      obj.image = this.topImages[0];\r\n      obj.iid = this.$route.params.iid;\r\n      obj.title = this.Goods.title;\r\n      obj.desc = this.Goods.desc;\r\n      obj.newPrice = this.Goods.newPrice;\r\n      this.$store.dispatch(\"addCart\", obj).then((res) => {\r\n        this.$toast.show(res, 300);\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    getDetail(this.$route.params.iid).then((res) => {\r\n      this.topImages = res.result.itemInfo.topImages;\r\n      const data = res.result;\r\n      this.Goods = new Goods(\r\n        data.itemInfo,\r\n        data.columns,\r\n        data.shopInfo.services\r\n      );\r\n\r\n      this.shop = new Shop(data.shopInfo);\r\n      this.detailInfo = data.detailInfo;\r\n      this.paramInfo = new GoodsParam(\r\n        data.itemParams.info,\r\n        data.itemParams.rule\r\n      );\r\n      if (data.rate.list) {\r\n        this.commentInfo = data.rate.list[0];\r\n      }\r\n      getRecommend().then((res) => {\r\n        this.recommendList = res.data.list;\r\n      });\r\n    });\r\n  },\r\n  mounted() {},\r\n};\r\n</script>\r\n<style scoped>\r\n.detail {\r\n  position: relative;\r\n  height: 100vh;\r\n}\r\n.scrollContent {\r\n  position: absolute;\r\n  top: 44px;\r\n  bottom: 49px;\r\n  left: 0;\r\n  right: 0;\r\n  overflow: hidden;\r\n}\r\n.swiperContent {\r\n  height: 200px;\r\n  overflow: hidden;\r\n}\r\n</style>"]}]}